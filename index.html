<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Montserrat Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>
    <style>
    .blink_me {
        animation: blinker .3s linear;
      }
      
      @keyframes blinker {
        50% {
          opacity: 0;
        }
      }
        /* Toast styling */
        body {
            background: #fafafa;
            padding-left: 30px;
            padding-right: 30px;
        }
        
        #download_icon:hover {
            opacity: .7;
        }
        
        .colored-toast.swal2-icon-success {
            background-color: #a5dc86 !important;
        }
        
        .colored-toast.swal2-icon-error {
            background-color: #f27474 !important;
        }
        
        .colored-toast.swal2-icon-warning {
            background-color: #f8bb86 !important;
        }
        
        .colored-toast.swal2-icon-info {
            background-color: #3fc3ee !important;
        }
        
        .colored-toast.swal2-icon-question {
            background-color: #87adbd !important;
        }
        
        .colored-toast .swal2-title {
            color: white;
        }
        
        .colored-toast .swal2-close {
            color: white;
        }
        
        .colored-toast .swal2-html-container {
            color: white;
        }
        
        /* Aqteq CSS */
        
        .center_div_within_row {
            display: flex;
            /* justify-content: center; */
            align-items: center;
        }
        
        table {
            /* border-collapse: separate; */
        }
        
        .table_row_header {
            background:#f0f0f1;
        }
        
        .table_row_header_CMP {
            background:#f0f0f1;
        }
        
        .source_id_header {
            background:#f0f0f1;
        }
        
        .streamer_id_header {
            background:#f0f0f1;
        }
        
        .table {
            cursor: pointer;
            margin-bottom: 35px;
        }
        
        .table td {
            padding: .5rem;
        }
        
        .table th {
            padding: .5rem;
        }
        
        .streamer_offset_header {
            width: 50px;
        }
        
        .inline_setback_header {
            width: 50px;
        }
        
        .table_row_header {
            width:160px;
        }
        
        .table_row_header_CMP {
            width:50px;
        }
        
        .source_offset_header {
            width: 50px;
        }
        
        .results {
            font-weight: 600;
        }
        
        .card {
            box-shadow: rgb(65 78 66 / 8%) 0 2px 8px 0;
            border: 0.3px solid #80808061;
            border-radius: 10px;
        }
        
        .row {
            margin-bottom: 5px;
        }
        
        div {
            font-family: "Montserrat";
            font-size: 14px;
        }
        
        .inputs_card {
            margin: 20px;
        }
        
        .inputs_card_bottom_row {
            margin-top:20px;
        }
        
        .inputs_title {
            white-space: nowrap;
            margin: auto;
            width: 50%;
            font-weight: bold;
        }
        
        .results_line {
            margin: 20px 0px 0px 0px
        }  
        
        .input {
            background-color: #fff;
            border: 1px solid #939393; /* eff0f6; */
            border-radius: 15px;
            box-shadow: rgba(27, 25, 121, .05) 0 2px 8px 0;
            box-sizing: border-box;
            color: #0b0a33;
            cursor: text;
            display: block;
            font-family: 'Montserrat';
            /* font-size: 13px; */
            /* font-weight: 500; */
            height: 15px;
            line-height: 1.111em;
            min-height: 15px;
            padding:15px 20px;
            transition: box-shadow 300ms,color 300ms,border-color 300ms;
            /* vertical-align: middle; */
            width: 100%;
        }
        
        .input:focus {
            transition: 'box-shadow' 300ms,color 300ms,'border-color' 300ms;
            bordeR: 1px solid black;
            box-shadow: rgb(129 129 129 / 12%) 0 2px 8px 0;
        }
        
        
        .dropdown {
            background-color: #fff;
            border: 1px solid #939393; /* eff0f6; */
            border-radius: 15px;
            box-shadow: rgba(27, 25, 121, .05) 0 2px 8px 0;
            box-sizing: border-box;
            color: #0b0a33;
            cursor: text;
            display: block;
            font-family: 'Montserrat';
            line-height: 1.111em;
            padding: 5px 15px;
            transition: box-shadow 300ms,color 300ms,border-color 300ms;
            /* vertical-align: middle; */
            width: 80%;
        }
        
        .dropdown:focus {
            transition: 'box-shadow' 300ms,color 300ms,'border-color' 300ms;
            bordeR: 1px solid black;
            box-shadow: rgb(129 129 129 / 12%) 0 2px 8px 0;
        }
        
        .error {
            font-weight: bold;
        }
        
        
        .input_error_tip[data-tip] {
            position:relative;
            z-index: 99999!important;
        }
        
        .input_error_tip[data-tip]:before {
            content:'';
            /* hides the tooltip when not hovered */
            display:none;
            content:'';
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid #000000bf;	
            position:absolute;
            top:30px;
            left:35px;
            z-index:8;
            font-size:0;
            line-height:0;
            width:0;
            height:0;
        }
        
        .input_error_tip[data-tip]:after {
            display: none;
            content: attr(data-tip);
            position: absolute;
            top: 35px;
            left: 0px;
            padding: 8px 12px;
            background: #000000bf;
            color: #fff;
            z-index: 9;
            font-size: 14px;
            font-family: 'Montserrat';
            height: 100%;
            line-height: 18px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            white-space: nowrap;
            word-wrap: normal;
        }
        
        .input_error_tip[data-tip]:hover:before,
        
        .input_error_tip[data-tip]:hover:after {
            display:block;
        }
        
        .result_error {
            background: #ffa50073;
            border-radius: 12px;
        }
        
        .result_error[data-title]:hover:after {
            opacity: 1;
            transition: all 0.1s ease 0.5s;
            visibility: visible;
        }
        
        .result_error[data-title]:after {
            content: attr(data-title);
            background-color: #fffcc1de;
            color: #111;
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            padding: 1px 5px 2px 5px;
            bottom: -1.6em;
            left: 100%;
            /* white-space: nowrap; */
            box-shadow: 1px 1px 3px #222222;
            width: 165px;
            border: 1px solid #111111;
            z-index: 99999;
            font-family: 'Montserrat';
            border-radius: 10px;
            opacity: 0;
            visibility: hidden;
        }
        
        .result_error[data-title] {
            position: relative;
        }
        
        .error[data-title]:hover:after {
            opacity: 1;
            transition: all 0.1s ease 0.5s;
            visibility: visible;
        }
        
        .error[data-title]:after {
            content: attr(data-title);
            background-color: #f3153eeb;
            color: #111;
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            padding: 1px 5px 2px 5px;
            bottom: -1.6em;
            left: 100%;
            /* white-space: nowrap; */
            box-shadow: 1px 1px 3px #222222;
            width: 165px;
            border: 1px solid #111111;
            z-index: 99999;
            font-family: 'Montserrat';
            border-radius: 10px;
            opacity: 0;
            visibility: none;
        }
        
        .error[data-title] {
            position: relative;
        }
        
        .js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
            opacity: 1 !important;
        }
        .input_error {
            font-weight: bold;
            background-color: #ff00343d;
            box-shadow: rgb(255 12 57 / 67%) 0 0px 10px 0;
            /* border-top: none !important; */
        }
        
        .top_cards {
            max-width: 600px;
        }
        table td:hover {
            background-color: rgba(0,0,0,.075);
        }
        
        
        
        
        .results_line {
            /* box-shadow: rgb(65 78 66 / 8%) 0 2px 8px 0;
            border: 0.3px solid #80808061; */
            border-radius: 10px;
            padding: 2px;
        }
        
        .results_line .row {
            margin-bottom: none;
            /* margin: 5px 0px; */
        }
        
        #Results .results_line {
            margin: 5px 0px 0px 0px;
        }
        
        #OVT_Analysis .results_line {
            margin: 5px 0px 0px 0px;
        }
        
        .calculation_error {
            background: #e7e7e7;
            cursor: pointer;
        }
        
        .calculation_error[data-title]:hover:after {
            opacity: 1;
            transition: all 0.1s ease 0.5s;
            visibility: visible;
        }
        
        .calculation_error[data-title]:after {
            content: attr(data-title);
            background-color: #dfdfdfde;
            color: #111;
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            padding: 1px 5px 2px 5px;
            bottom: -1em;
            left: 100%;
            /* white-space: nowrap; */
            box-shadow: 1px 1px 3px #222222;
            width: 165px;
            border: 1px solid #111111;
            z-index: 99999;
            font-family: 'Montserrat';
            border-radius: 10px;
            opacity: 0;
            visibility: hidden;
        }
        
        .calculation_error[data-title] {
            position: relative;
        }
        
        
        
        
        /* art */
        
        .results_line2 {
            margin: 20px 0px 0px 0px
        }  
        
        .results_line2 {
            box-shadow: rgb(65 78 66 / 8%) 0 2px 8px 0;
            border: 0.3px solid #80808061;
            border-radius: 10px;
            padding: 2px;
        }
        
        .results_line2 .row {
            margin-bottom: none;
            margin: 5px 0px;
        }
        
        #Results .results_line2 {
            margin: 5px 0px 0px 0px;
        }
        
        sub {
            bottom: 0em;
        }
        
        .lowered_sub {
            bottom: -.2em !important;
            font-weight: 500;
        }
            
        .error {
            font-weight: bold;
        }
        
        
        .input_error_tip[data-tip] {
            position:relative;
        }
        
        .input_error_tip[data-tip]:before {
            content:'';
            /* hides the tooltip when not hovered */
            display:none;
            content:'';
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid #000000bf;	
            position:absolute;
            top:30px;
            left:35px;
            z-index:8;
            font-size:0;
            line-height:0;
            width:0;
            height:0;
        }
        
        .input_error_tip[data-tip]:after {
            display: none;
            content: attr(data-tip);
            position: absolute;
            top: 35px;
            left: 0px;
            padding: 8px 12px;
            background: #000000bf;
            color: #fff;
            z-index: 9;
            font-size: 14px;
            font-family: 'Montserrat';
            height: 100%;
            line-height: 18px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            white-space: nowrap;
            word-wrap: normal;
        }
        
        .input_error_tip[data-tip]:hover:before,
        
        .input_error_tip[data-tip]:hover:after {
            display:block;
        }
        
        .result_error {
            background: #ffa50073;
            border-radius: 12px;
        }
        
        .result_error[data-title]:hover:after {
            opacity: 1;
            transition: all 0.1s ease 0.5s;
            visibility: visible;
        }
        
        .result_error[data-title]:after {
            content: attr(data-title);
            background-color: #fffcc1de;
            color: #111;
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            padding: 1px 5px 2px 5px;
            bottom: -1.6em;
            left: 100%;
            /* white-space: nowrap; */
            box-shadow: 1px 1px 3px #222222;
            width: 165px;
            border: 1px solid #111111;
            z-index: 99999;
            font-family: 'Montserrat';
            border-radius: 10px;
            opacity: 0;
            visibility: hidden;
        }
        
        .result_error[data-title] {
            position: relative;
        }
        
        .error[data-title]:hover:after {
            opacity: 1;
            transition: all 0.1s ease 0.5s;
            visibility: visible;
        }
        
        .error[data-title]:after {
            content: attr(data-title);
            background-color: #f3153eeb;
            color: #111;
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            padding: 1px 5px 2px 5px;
            bottom: -1.6em;
            left: 100%;
            /* white-space: nowrap; */
            box-shadow: 1px 1px 3px #222222;
            width: 165px;
            border: 1px solid #111111;
            z-index: 99999;
            font-family: 'Montserrat';
            border-radius: 10px;
            opacity: 0;
            visibility: none;
        }
        
        .error[data-title] {
            position: relative;
        }
        
        .js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
            opacity: 1 !important;
        }
        .input_error {
            font-weight: bold;
            background-color: #ff00343d;
            box-shadow: rgb(255 12 57 / 67%) 0 0px 10px 0;
            /* border-top: none !important; */
        }
        
        .switch-button {
            font-family: 'Montserrat';
            font-weight: 600;
            box-sizing: border-box;
            padding: 0;
            margin: 0;
            background: rgb(207 207 207 / 56%);
            border-radius: 30px;
            overflow: hidden;
            width: 240px;
            text-align: center;
            font-size: 18px;
            letter-spacing: 1px;
            color: #000000;
            position: relative;
            padding-right: 120px;
            position: relative;
        }
        .switch-button:before {
            content: "Chart";
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            pointer-events: none;
        }
        .switch-button-checkbox {
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            z-index: 2;
        }
        .switch-button-checkbox:checked + .switch-button-label:before {
            transform: translateX(120px);
            transition: transform 300ms linear;
        }
        .switch-button-checkbox + .switch-button-label {
            position: relative;
            padding: 15px 0;
            display: block;
            user-select: none;
            pointer-events: none;
        }
        .switch-button-checkbox + .switch-button-label:before {
            content: "";
            background: #c1f9bd;
            height: 100%;
            width: 100%;
            position: absolute;
            left: 0;
            top: 0;
            border-radius: 30px;
            transform: translateX(0);
            transition: transform 300ms;
        }
        .switch-button-checkbox + .switch-button-label .switch-button-label-span {
            position: relative;
        }
        
        .animate__animated.animate__fadeIn {
            --animate-duration: .5s;
        }
        .animate__animated.animate__fadeOut {
            --animate-duration: .2s !important;
        }

        .element {
            position: relative;
            overflow: hidden;
        }

        .element.hide-me {
            animation: hideme .2s forwards;
            opacity: 0;
            }
            @keyframes hideme {
            100% {
                height: 0;
            }
        }
    </style>
    <style>

        .elements {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Old versions of Firefox */
                -ms-user-select: none; /* Internet Explorer/Edge */
                    user-select: none; /* Non-prefixed version, currently
                                        supported by Chrome, Opera and Firefox */
        }

        .auto_generate {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
        }

        .auto_generate_btn {
            background: #c1f9bd;
            border: none;
            font-family: 'Montserrat';
            font-size: 15px;
            font-weight: bold;
            width: 32%;
            position: relative;
            border-radius: 20px;
            padding: 6px;
            outline: 1px solid black;
        }

        .auto_generate_btn:focus {
            outline: 1px solid black !important;
        }

        .auto_generate_btn:active {
            outline: none !important;
        }

        .auto_generate_btn:hover {
            background-color: #e2ffe0;
            -webkit-transition: background-color 100ms linear;
            -ms-transition: background-color 100ms linear;
            transition: background-color 100ms linear;
        }

        

        .create_new {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .add_element_row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 5px;
        }

        .create_new_button {
            background: #e2ffe0;
            border: none;
            font-family: 'Montserrat';
            font-size: 15px;
            font-weight: bold;
            width: 25%;
            position: relative;
            border-radius: 20px;
            padding: 6px;
            outline: 1px solid black;
        }

        .create_new_button:focus {
            outline: 1px solid black !important;
        }

        .create_new_button:active {
            outline: none !important;
        }

        .create_new_button:hover {
            background-color: #c1f9bd;
            -webkit-transition: background-color 100ms linear;
            -ms-transition: background-color 100ms linear;
            transition: background-color 100ms linear;
        }

    </style>

    
    <style>
        .x__icon {
            content: url('https://uploads-ssl.webflow.com/61dc832d50fed2294ffc0cbc/6269de51f84773730fca56bc_x_1.svg');
            max-width: 25px;
            cursor: pointer;
            margin-top: 5px;
            position: absolute;
        }

        .x__icon:hover {
            content: url('https://uploads-ssl.webflow.com/61dc832d50fed2294ffc0cbc/6269de515e0d74690c0e6926_x_2.svg');
            max-width: 25px;
        }


    </style>  
</head>

<meta id="position_elements" data-json>
<meta id="weight_elements" data-json>

<body>
    


    <template id="new_input">
        <div class="row element animate__animated">
            <div class="col-3 inputs_title">Element <span class="element_number"></span></div>
            <div class="col-4">
                <input onkeyup=checkInputs() class="input position_input" type="text" name="position" placeholder="In-line X position" oninput="this.value = this.value.replace(/[^0-9.-]/g, '').replace(/(\..*)\./g, '$1');"/>
            </div>
            <div class="col-4">
                <input onkeyup=checkInputs() class="input weight_input" type="text" name="weight" placeholder="weight" oninput="this.value = this.value.replace(/[^0-9.-]/g, '').replace(/(\..*)\./g, '$1');"/>
            </div>
            <div class="col-1 deletable">
                <i class="x__icon" onclick=deleteRow(this)></i>
            </div>
        </div>
    </template>

    <div class="row">

        <!-- Inputs -->
        <div class="col-12 col-lg-4 col-sm-12">
            <div class="card inputs_card top_cards" id="Inputs">
                <div class="card-body">
                    <h4 class="card-title" style="margin-bottom: 15px;">Parameters</h4>
                    
                    <div class="row">
                        <div class="col-3 inputs_title">Horizontal Velocity</div>
                        <div class="col-4" style="visibility: hidden;">
                        </div>
                        <div class="col-4">
                            <input onkeyup=checkInputs() class="input" type="text" id="horizontal_velocity" name="horizontal_velocity" placeholder="Horizontal Velocity" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                        </div>
                        <div class="col-1" style="visibility: hidden;">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-3 inputs_title">Max Frequency</div>
                        <div class="col-4" style="visibility: hidden;">
                        </div>
                        <div class="col-4">
                            <input onkeyup=checkInputs() class="input" type="text" id="max_frequency" name="max_frequency" placeholder="Max Frequency" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                        </div>
                        <div class="col-1" style="visibility: hidden;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card inputs_card top_cards" id="Inputs2">
                <div class="card-body">
                    <h5 class="card-title" style="margin-bottom: 15px;">Bulk Element Creation</h5>

                    <div class="row">
                        <div class="col-3 inputs_title">Element Spacing</div>
                        <div class="col-4" style="visibility: hidden;">
                        </div>
                        <div class="col-4">
                            <input class="input" type="text" id="element_spacing" name="element_spacing" placeholder="Element Spacing" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                        </div>
                        <div class="col-1" style="visibility: hidden;">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-3 inputs_title"># of Elements</div>
                        <div class="col-4" style="visibility: hidden;">
                        </div>
                        <div class="col-4">
                            <input class="input" type="text" id="number_of_elements" name="position" placeholder="# of Elements" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                        </div>
                        <div class="col-1" style="visibility: hidden;">
                        </div>
                    </div>

                    <div class="row auto_generate" style="margin-top: 30px;">
                        <button class="auto_generate_btn" id="generate_elements" onclick=generateElements()>Generate Elements</button> <!--  data-toggle="modal" data-target="#myModal" -->
                    </div>

                </div>
            </div>

            <div class="card inputs_card top_cards" id="Elements">
                <div class="card-body">
                    <h4 class="card-title" style="margin-top: 30px;">Elements</h4>
                        <div class="row animate__animated"   style="margin-top: 20px; margin-bottom: 10px;">
                            <div class="col-3" style="visibility: hidden"></div>
                            <div class="col-4" style="text-align: center; font-weight: bold">
                                <span>In-line X position</span>
                            </div>
                            <div class="col-4" style="text-align: center; font-weight: bold">
                                <span>Weight</span>
                            </div>
                            <div class="col-1" style="visibility: hidden;">
                            </div>
                        </div>

                        <div class="inputs_card_top_row elements">

                            <div class="row element animate__animated">
                                <div class="col-3 inputs_title">Element <span class="element_number">1</span></div>
                                <div class="col-4">
                                    <input onkeyup=checkInputs() class="input position_input" type="text" name="position" placeholder="In-line X position" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                                </div>
                                <div class="col-4">
                                    <input onkeyup=checkInputs() class="input weight_input" type="text" name="weight" placeholder="weight" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"/>
                                </div>
                                <div class="col-1 deletable">
                                    <i class="x__icon" onclick=deleteRow(this)></i>
                                </div>
                            </div>

                            <div class="row create_new">
                                <!-- Used as anchor to add elements above this point -->
                            </div>
                        </div>

                        <div class="row add_element_row">
                            <button onclick=createNew() class="auto_generate_btn">+ Add Element</button>
                        </div>
        
                </div>
            </div>
        </div>


        <div class="col-12 col-lg-5 col-sm-12" style="position: sticky !important; top: 20px; padding-top: 15px;">

            <div style="position: sticky !important; top: 20px;">
                <div class="card animate__animated animate__fadeIn" id="Chart" style="padding: 10px;">
                    <div id='chart' style="width: 100%; height: 100%"></div>
                </div>
    
                <div class="card animate__animated animate__fadeIn" id="Chart" style="padding: 10px; margin-top: 5px;">
                    <div id='chart2' style="width: 100%; height: 100%"></div>
                </div>
            </div>
        
        </div>

    </div>

</body>

<!-- Jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- SweetAlert -->
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Plotly (Charts) -->
<script src='https://cdn.plot.ly/plotly-2.9.0.min.js'></script>
<!-- Auto Run Code on Load -->

<script>
    function createNew(){var e=$("#new_input").html();$(e).insertBefore(".create_new")}function bulkCreate(e){$(".element").remove(),observer.disconnect();for(var t=0;t<e;t++){var n=$("#new_input").html();$(n).insertBefore(".create_new")}$(".elements").addClass("blink_me"),setTimeout(()=>{$(".elements").removeClass("blink_me")},300),position_elements=$("#position_elements").data("json");for(t=0;t<position_elements.length;t++)$(".position_input").eq(t).val(round(position_elements[t],2)),$(".weight_input").eq(t).val(round(weight_elements[t],2));indexElements(),generateDotPlot(),generateResponseChart(),observer.observe(targetNode,{childList:!0,subtree:!0})}function checkInputs(){generateDotPlot(),generateResponseChart(),console.log("input typed into")}function autoTest(){$("#horizontal_velocity").val(1e3),$("#max_frequency").val(125),$("#element_spacing").val(50),$("#number_of_elements").val(3),generateElements()}function generateElements(){let e=$("#horizontal_velocity").val(),t=$("#max_frequency").val(),n=$("#element_spacing").val(),a=$("#number_of_elements").val();runCalculations({horizontal_velocity:parseFloat(e),max_frequency:parseFloat(t),element_spacing:parseFloat(n),number_of_elements:parseFloat(a)})}function runCalculations(e){let t=e.element_spacing,n=t*e.number_of_elements;default_weight=1,position_elements=[],weight_elements=[];for(var a=0;a<e.number_of_elements;a++)0==a?(position_value=-(n/2-t/2),position_elements.push(position_value),weight_elements.push(default_weight)):(position_value=position_elements[a-1]+t,console.log(`elm_sp: ${t}, position_elm_less1: ${position_elements[a-1]}`),position_elements.push(position_value),weight_elements.push(default_weight));$("#position_elements").data("json",position_elements),$("#weight_elements").data("json",weight_elements),bulkCreate(e.number_of_elements)}function is_NaN(e){return e!=e}function round(e,t){let n=t.toString();return e.toString().includes("e-")&&(e=0),+(Math.round(e+`e+${n}`)+`e-${n}`)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function generateResponseChart(){chart_data=generateArrayResponse();let e=[];for(var t=0;t<chart_data.dB_data.length;t++)e.push(chart_data.dB_data[t]);y_min=Math.min(...e),y_max=Math.max(...e)<0?0:Math.max(...e);let n=[];n.push({type:"line",x:chart_data.frequency_data,y:chart_data.dB_data,mode:"line"});let a={showlegend:!1,xaxis:{title:{text:"Frequency (Hz)",font:{family:"Montserrat",size:15,color:"#7f7f7f"}},showgrid:!0},yaxis:{title:{text:"Attenuation (dB)",font:{family:"Montserrat",size:15,color:"#7f7f7f"}},range:[1.2*y_min,1.2*y_max],showgrid:!0,showline:!0},title:"Inline Array Response",images:[{x:1.1,y:-.3,sizex:.18,sizey:.18,source:"https://static.wixstatic.com/media/6440e3_79209f11808643efaab19239b58ec2f9~mv2.png/v1/fill/w_172,h_93,al_c,usm_2.00_1.00_0.00,enc_auto/No_Background.png",xanchor:"right",xref:"paper",yanchor:"bottom",yref:"paper"}]};Plotly.newPlot("chart2",n,a,{modeBarButtonsToRemove:["select","lasso"],responsive:!0,displaylogo:!1})}function generateDotPlot(){let e=[],t=[];$(".position_input").each(function(){e.push(parseFloat($(this).val()))}),$(".weight_input").each(function(){t.push(parseFloat($(this).val()))});let n=null;n=e.length<20?8:e.length<40?8:e.length<60?7:e.length<80?6:e.length<100?5:4,data=[];for(var a=0;a<e.length;a++)!1===is_NaN(e[a])&&!1===is_NaN(t[a])&&data.push({type:"scatter",x:[e[a]],y:[t[a]],mode:"lines+markers",marker:{size:n,color:"#000080",symbol:"diamond"},name:`Element ${a+1}`});let o=[];for(a=0;a<data.length;a++)o.push(data[a].y[0]);y_max=Math.max(...o),y_min=Math.min(...o)>0?0:Math.min(...o);let s={showlegend:!1,xaxis:{title:{text:"In Line Position",font:{family:"Montserrat",size:15,color:"#7f7f7f"}},showgrid:!0},yaxis:{range:[1.2*y_min,1.2*y_max],showgrid:!0,showline:!0},title:"Array Element Weights",images:[{x:1.1,y:-.3,sizex:.18,sizey:.18,source:"https://static.wixstatic.com/media/6440e3_79209f11808643efaab19239b58ec2f9~mv2.png/v1/fill/w_172,h_93,al_c,usm_2.00_1.00_0.00,enc_auto/No_Background.png",xanchor:"right",xref:"paper",yanchor:"bottom",yref:"paper"}]};Plotly.newPlot("chart",data,s,{modeBarButtonsToRemove:["select","lasso"],responsive:!0,displaylogo:!1})}function deleteRow(e){let t=$(e).parents("div").eq(1);$(t).css({height:$(t).height()+"px"}),$(t).addClass("animate__fadeOut"),$(t).addClass("hide-me"),setTimeout(()=>{t.remove(),indexElements(),generateDotPlot(),generateResponseChart()},200)}function indexElements(){element_nums=$(".element_number");for(var e=0;e<element_nums.length;e++)$(element_nums[e]).text(e+1)}function callback(e){e.forEach(function(e){try{e.target.className.includes("elements")&&e.addedNodes.length>=1&&indexElements()}catch(e){}})}document.addEventListener("DOMContentLoaded",e=>{autoTest()});var observer=new MutationObserver(callback),targetNode=document.body;function get_valid_postions_and_weight(){let e=[],t=[];$(".position_input").each(function(){e.push(parseFloat($(this).val()))}),$(".weight_input").each(function(){t.push(parseFloat($(this).val()))});let n=[],a=[];for(var o=0;o<e.length;o++)0==is_NaN(e[o])&&0==is_NaN(t[o])&&(n.push(e[o]),a.push(t[o]));return{valid_position_values:n,valid_weight_values:a}}function generateArrayResponse(){let e=get_valid_postions_and_weight(),t=e.valid_position_values,n=e.valid_weight_values,a=parseFloat($("#horizontal_velocity").val());let o=function(e,t){let n=[];for(var a=0;a<t;a++)0==a?n.push(0):n.push(n[a-1]+e/t);return n}(parseFloat($("#max_frequency").val()),100),s=function(e,t,n){let a=[];for(var o=0;o<n;o++)a.push(e[o]/t);return a}(o,a,100),i=function(e,t,n){let a=0;e.forEach(e=>{a+=Math.abs(e)});let o=[];for(var s=0;s<n;s++)o.push(t[s]/a);return console.log(`Weigts: ${a}`),o}(n,function(e,t,n){let a=[];for(var o=0;o<n;o++)a.push(Math.sqrt(e[o]**2+t[o]**2));return a}(function(e,t,n,a){let o=[];for(var s=0;s<a;s++){let a=0;for(var i=0;i<e.length;i++)a+=t[i]*Math.cos(2*Math.PI*n[s]*e[i]);o.push(a)}return o}(t,n,s,100),function(e,t,n,a){let o=[];for(var s=0;s<a;s++){let a=0;for(var i=0;i<e.length;i++)a+=t[i]*Math.sin(2*Math.PI*n[s]*e[i]);o.push(a)}return o}(t,n,s,100),100),100);return{frequency_data:o,dB_data:function(e,t,n){let a=0;e.forEach(e=>{a+=Math.abs(e)});let o=[];for(var s=0;s<n;s++)t[s]/a>1e-4?o.push(Math.log(t[s])/Math.log(10)*20):o.push(-60);return o}(n,i,100)}}observer.observe(targetNode,{childList:!0,subtree:!0});
</script>

</html>
